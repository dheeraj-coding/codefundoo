(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5434:function(e,t,a){e.exports=a(5628)},5439:function(e,t,a){},5628:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),i=a.n(r),o=(a(5439),a(23)),s=a(24),c=a(27),d=a(25),u=a(28),m=a(17),h=a(5),p=a(20),b=a(5633),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handlClick=a.handlClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handlClick",value:function(e){var t=this;return function(a){t.props.history.push("/"+e)}}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(h.a,{position:"static"},l.a.createElement(h.p,null,l.a.createElement(h.q,{variant:"headline",className:e.grow},"Torrid"),l.a.createElement(h.b,{color:"inherit",onClick:this.handlClick("login")},"Login"),l.a.createElement(h.b,{color:"inherit",onClick:this.handlClick("register")},"Register"))))}}]),t}(n.Component),E=Object(b.a)(Object(p.withStyles)(function(e){return{grow:{flexGrow:1}}})(g)),O=a(5632),v=a(5629),f=a(5631),j=a(18),w=a(148),y="fdb2f898fa5c4e",C=a.n(w).a.initializeApp({apiKey:"AIzaSyCPXvYYr8GTVdI-QoYr95w38svHv1kkVOU",authDomain:"codefundoo-1539958868140.firebaseapp.com",databaseURL:"https://codefundoo-1539958868140.firebaseio.com",projectId:"codefundoo-1539958868140",storageBucket:"codefundoo-1539958868140.appspot.com",messagingSenderId:"980353695873"}),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={dialogContent:"",dialogTitle:"",dialogOpen:!1},a.handleLogin=a.handleLogin.bind(Object(m.a)(Object(m.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleLogin",value:function(e){var t=this,a=document.getElementById("username").value,n=document.getElementById("password").value;C.auth().signInWithEmailAndPassword(a,n).then(function(e){t.props.history.push("/dashboard")}).catch(function(e){t.setState({dialogOpen:!0,dialogContent:"Invalid Username or Password",dialogTitle:"Login Failed"})})}},{key:"handleDialogClose",value:function(e){this.setState({dialogOpen:!1})}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(h.h,{className:e.paper,elevation:3},l.a.createElement(h.q,{style:{textAlign:"center"},variant:"display3"},"Login"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(h.o,{className:e.textField,required:!0,id:"username",label:"Email"}),l.a.createElement("br",null),l.a.createElement(h.o,{className:e.textField,required:!0,id:"password",type:"password",label:"Password"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(h.b,{variant:"contained",color:"primary",onClick:this.handleLogin},"Login")),l.a.createElement(h.c,{open:this.state.dialogOpen,onClose:this.handleDialogClose},l.a.createElement(h.f,null,this.state.dialogTitle),l.a.createElement(h.d,null,l.a.createElement(h.e,null,this.state.dialogContent))))}}]),t}(n.Component),S=Object(p.withStyles)(function(e){var t;return{paper:(t={},Object(j.a)(t,e.breakpoints.up("md"),{width:"20vw",height:"60vh",margin:"2em auto"}),Object(j.a)(t,"height","60vh"),Object(j.a)(t,"margin","2em"),Object(j.a)(t,"padding","1em"),Object(j.a)(t,"boxSizing","border-box"),Object(j.a)(t,"textAlign","center"),t),textField:{width:"80%",margin:"1em auto"}}})(k),x=a(67),I=a(68),T=a.n(I),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",errorText:"",errorState:!1,dialogContent:"",dialogTitle:"",dialogOpen:!1},a.handleRegister=a.handleRegister.bind(Object(m.a)(Object(m.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleRegister",value:function(e){var t=this,a=document.getElementById("username").value,n=document.getElementById("password").value,l=document.getElementById("repeatpassword").value;n===l&&this.props.isGeolocationEnabled?(this.setState({username:a,password:n,errorState:!1,errorText:""}),C.auth().createUserWithEmailAndPassword(a,n).then(function(e){T()({method:"POST",url:"http://localhost:8080/hospitals",data:{name:a,password:n,repeat:l,lat:t.props.coords.latitude,lon:t.props.coords.longitude}}).then(function(e){t.props.history.push("/login")},function(e){t.setState({dialogOpen:!0,dialogContent:"Sorry! Our servers are facing issues please try again in sometime.",dialogTitle:"Registration Failed"})})}).catch(function(e){t.setState({dialogOpen:!0,dialogContent:"Sorry! Our servers are facing issues please try again in sometime.",dialogTitle:"Registration Failed"})})):this.props.isGeolocationEnabled?this.setState({errorText:"Passwords don't match",errorState:!0}):this.setState({errorText:"Geolocation must be enabled",errorState:!0})}},{key:"handleDialogClose",value:function(e){this.setState({dialogOpen:!1})}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(h.h,{className:e.paper,elevation:3},l.a.createElement(h.q,{variant:"display3"},"Register"),l.a.createElement("br",null),l.a.createElement(h.o,{required:!0,className:e.textField,id:"username",label:"Email"}),l.a.createElement(h.o,{required:!0,className:e.textField,id:"password",label:"Password",type:"password"}),l.a.createElement(h.o,{required:!0,className:e.textField,id:"repeatpassword",label:"Re-type Password",type:"password"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(h.b,{variant:"contained",color:"primary",onClick:this.handleRegister},"Register"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(h.q,{variant:"body2",color:"error"},this.state.errorText)),l.a.createElement(h.c,{open:this.state.dialogOpen,onClose:this.handleDialogClose},l.a.createElement(h.f,null,this.state.dialogTitle),l.a.createElement(h.d,null,l.a.createElement(h.e,null,this.state.dialogContent))))}}]),t}(n.Component),D=Object(b.a)(Object(x.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:1})(Object(p.withStyles)(function(e){var t;return{paper:(t={},Object(j.a)(t,e.breakpoints.up("md"),{width:"20vw",height:"60vh",margin:"2em auto"}),Object(j.a)(t,"height","60vh"),Object(j.a)(t,"margin","2em"),Object(j.a)(t,"padding","1em"),Object(j.a)(t,"boxSizing","border-box"),Object(j.a)(t,"textAlign","center"),t),textField:{width:"80%",margin:"1em auto"}}})(q)));var R=a(69),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(R.Map,{google:this.props.google,zoom:8,style:{width:"100%",height:"100%"},initialCenter:this.props.position},l.a.createElement(R.Marker,{name:this.props.name,title:this.props.title,position:this.props.position}))}}]),t}(n.Component),N=Object(R.GoogleApiWrapper)({apiKey:"AIzaSyBB9vokxe7r-4m8uGRmSDkQTBHsh_9E22s"})(A),B=a(63),U=a.n(B),F=a(149);function L(e){return l.a.createElement(h.i,Object.assign({direction:"up"},e))}var P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={users:{},activeUser:{},open:!1},a.dbRef={},a.handleClose=a.handleClose.bind(Object(m.a)(Object(m.a)(a))),a.handleOpen=a.handleOpen.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleOpen",value:function(e,t){this.setState({open:!0,activeUser:e})}},{key:"handleClose",value:function(e){this.setState({open:!1})}},{key:"render",value:function(){var e,t,a,n=this,r=this.props.classes;return this.props.coords&&(e=this.props.coords.latitude,t=this.props.coords.longitude,a=function(e){n.dbRef=C.database().ref("locations/"+e+"/affected"),n.dbRef.on("value",function(e){n.setState({users:e.val()})})},T()({url:"https://eu1.locationiq.com/v1/reverse.php?key="+y+"&lat="+e+"&lon="+t+"&format=json",method:"GET"}).then(function(e){a(e.data.address.postcode)})),l.a.createElement("div",null,l.a.createElement(h.h,{className:r.paper,elevation:3},l.a.createElement(h.j,null,l.a.createElement(h.m,null,l.a.createElement(h.n,null,l.a.createElement(h.l,null,l.a.createElement(h.q,{variant:"title"},"Name")),l.a.createElement(h.l,null,l.a.createElement(h.q,{variant:"title"},"Phone Number")),l.a.createElement(h.l,null,l.a.createElement(h.q,{variant:"title"},"View")))),l.a.createElement(h.k,null,this.state.users?Object.keys(this.state.users).map(function(e,t){return l.a.createElement(h.n,{key:e+t},l.a.createElement(h.l,null,l.a.createElement(h.q,null,n.state.users[e].name)),l.a.createElement(h.l,null,l.a.createElement(h.q,null,n.state.users[e].phone)),l.a.createElement(h.l,null,l.a.createElement(h.g,{onClick:n.handleOpen.bind(n,n.state.users[e])},l.a.createElement(F.a,{fontSize:"small"}))))}):void 0))),l.a.createElement(h.c,{fullScreen:!0,open:this.state.open,onClose:this.handleClose,TransitionComponent:L},l.a.createElement(h.a,{className:r.appBar},l.a.createElement(h.p,null,l.a.createElement(h.g,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},l.a.createElement(U.a,null)),l.a.createElement(h.q,{variant:"h6",color:"inherit",className:r.flex},"Location"))),l.a.createElement(N,{name:this.state.activeUser.name,title:this.state.activeUser.name+":"+this.state.activeUser.phone,position:{lat:this.state.activeUser.lat,lng:this.state.activeUser.lon}})))}}]),t}(n.Component),G=Object(x.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:1})(Object(p.withStyles)(function(e){var t;return{paper:(t={},Object(j.a)(t,e.breakpoints.up("md"),{width:"90vw",margin:"2em auto"}),Object(j.a)(t,"width","100vw"),Object(j.a)(t,"margin","1em"),Object(j.a)(t,"height","600"),t),appBar:{position:"relative"},flex:{flex:1}}})(P)),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={loginState:window.localStorage.getItem("loggedIn"),email:window.localStorage.getItem("UID")},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.auth().onAuthStateChanged(function(t){t&&e.setState({loginState:!0,email:t.email})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(E,null),l.a.createElement("main",null,l.a.createElement(O.a,null,l.a.createElement(v.a,{path:"/login",component:S}),l.a.createElement(v.a,{path:"/register",component:D}),l.a.createElement(v.a,{path:"/dashboard",render:function(t){return e.state.loginState?l.a.createElement(G,Object.assign({},t,{username:e.state.email})):l.a.createElement(f.a,{to:"/login"})}}))))}}]),t}(n.Component),W=a(5630);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));C.auth().onAuthStateChanged(function(e){e&&(window.localStorage.setItem("UID",e.email),window.localStorage.setItem("loggedIn",!0))}),i.a.render(l.a.createElement(W.a,null,l.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5434,2,1]]]);
//# sourceMappingURL=main.688a5201.chunk.js.map